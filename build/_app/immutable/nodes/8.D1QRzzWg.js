import{f as m,a as i,t as nt}from"../chunks/7E3TE2H7.js";import"../chunks/B3Mksg1v.js";import{ad as ne,af as k,ag as ue,s as d,g as t,m as F,e as ve,ak as n,al as r,ai as W,aj as ie,am as a,ae as X}from"../chunks/OkgDLo3s.js";import{s as w}from"../chunks/BR2KVbEA.js";import{i as M}from"../chunks/Fk3cocL4.js";import{e as ht,i as yt}from"../chunks/DzBJIcZt.js";import{h as ce,s as Z,r as $,a as ut,b as de}from"../chunks/DCsxDTCv.js";import{e as y}from"../chunks/D6IYFWxt.js";import{i as pe,s as be}from"../chunks/CGyB83vU.js";import{i as me}from"../chunks/C_v8qH-G.js";import{b as _e}from"../chunks/CirKMD74.js";var he=m('<link rel="preconnect" href="https://fonts.googleapis.com"/> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/> <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&amp;family=Fraunces:opsz,wght@9..144,600;9..144,700&amp;display=swap" rel="stylesheet"/>',1),ye=m('<button class="ghost-button ghost-compact svelte-8u244y" type="button">Back to setup</button>'),fe=m(`<h1 class="svelte-8u244y">Bid, take, and score.</h1> <p class="subhead svelte-8u244y">Hit your bid exactly to score 10 + tricks (or 5 for a zero bid). Miss
            the bid and you just score the tricks you took.</p>`,1),ge=m('<h1 class="svelte-8u244y"> </h1> <p class="subhead svelte-8u244y"> </p>',1),ke=m('<label class="player-row svelte-8u244y"><span class="player-index svelte-8u244y"></span> <input class="player-input svelte-8u244y" maxlength="14"/></label>'),Re=m("<option> </option>"),xe=m('<div class="setup-grid svelte-8u244y"><div class="setup-card svelte-8u244y"><h2 class="svelte-8u244y">Players</h2> <p class="hint svelte-8u244y"></p> <div class="player-list svelte-8u244y"></div> <div class="player-actions svelte-8u244y"><button class="ghost-button svelte-8u244y" type="button">Add player</button> <button class="ghost-button svelte-8u244y" type="button">Remove</button></div></div> <div class="setup-card svelte-8u244y"><h2 class="svelte-8u244y">Rounds</h2> <p class="hint svelte-8u244y">Pick a max hand size and whether to play back down.</p> <label class="control svelte-8u244y"><span>Max hand size</span> <select class="svelte-8u244y"></select></label> <label class="toggle svelte-8u244y"><input type="checkbox"/> <span> </span></label> <div class="round-summary svelte-8u244y"><span> </span> <span class="round-list svelte-8u244y"> </span></div> <button class="primary-button svelte-8u244y" type="button">Start rounds</button></div></div>'),Te=m('<div class="stat-group stat-bet svelte-8u244y"><input class="stat-input svelte-8u244y" type="number" min="0" inputmode="numeric" pattern="[0-9]*"/></div> <div class="stat-group stat-made stat-placeholder svelte-8u244y"><div class="stat-value svelte-8u244y">--</div></div> <div class="stat-group stat-result stat-placeholder svelte-8u244y"><div class="stat-value svelte-8u244y">--</div></div>',1),Pe=m('<div class="stat-group stat-made stat-placeholder svelte-8u244y"><div class="stat-value svelte-8u244y">--</div></div> <div class="stat-group stat-result stat-placeholder svelte-8u244y"><div class="stat-value svelte-8u244y">--</div></div>',1),we=m('<div class="stat-group stat-made svelte-8u244y"><input class="stat-input svelte-8u244y" type="number" min="0" inputmode="numeric" pattern="[0-9]*"/></div> <div class="stat-group stat-result svelte-8u244y"><div class="result-value svelte-8u244y"><!></div></div>',1),Ae=m('<div class="stat-group stat-bet stat-locked svelte-8u244y"><input class="stat-input svelte-8u244y" type="number" min="0" inputmode="numeric" pattern="[0-9]*" disabled/></div> <!>',1),Se=m('<div class="player-score-row svelte-8u244y"><div class="player-name svelte-8u244y"><span> </span> <span class="total-badge svelte-8u244y"><!></span></div> <!></div>'),ze=m('<div class="round-columns svelte-8u244y" aria-hidden="true"><span class="round-columns-spacer svelte-8u244y"></span> <span class="round-columns-label svelte-8u244y">Bet</span> <span class="round-columns-label svelte-8u244y">Made</span> <span class="round-columns-label svelte-8u244y">Result</span></div> <div class="round-rows svelte-8u244y"></div>',1),Ee=m('<button class="primary-button lock-toggle svelte-8u244y" type="button">Lock bids</button>'),Me=m('<button class="ghost-button lock-toggle svelte-8u244y" type="button">Unlock bids</button>'),Ce=m('<div class="rounds svelte-8u244y"><!> <div class="round-footer svelte-8u244y"><div class="round-footer-center svelte-8u244y"><button class="ghost-button footer-nav svelte-8u244y" type="button" aria-label="Previous round">&larr;</button> <!> <button class="ghost-button footer-nav svelte-8u244y" type="button" aria-label="Next round">&rarr;</button></div></div></div>'),Fe=m('<section class="ohhell-page svelte-8u244y"><a class="breadcrumb svelte-8u244y">&larr; Game Score Tools</a> <div class="board svelte-8u244y"><header class="board-head svelte-8u244y"><div><div class="eyebrow-row svelte-8u244y"><p class="eyebrow svelte-8u244y">Oh Hell!</p> <!></div> <!></div> <div></div></header> <!> <button class="reset-text svelte-8u244y" type="button" aria-live="polite"> </button></div></section>');function De(Ft,Nt){ne(Nt,!1);const ft=2,gt=8;let f=F(["","","",""]),Y=F(8),vt=F(!0),u=F([]),I=F(!1),N=F("setup"),o=F(0),C=F([]);const Ht=(e,s,l)=>{const v=Array.from({length:e},(c,_)=>e-_);return s&&e>1&&v.push(...Array.from({length:e-1},(c,_)=>_+2)),v.map(c=>({handSize:c,bids:Array.from({length:l},()=>null),takes:Array.from({length:l},()=>null)}))},tt=()=>{d(u,Ht(t(Y),t(vt),t(f).length)),d(o,0),d(C,Array.from({length:t(u).length},()=>"bids"))},kt=(e,s,l)=>Math.min(l,Math.max(s,e)),Bt=(e,s)=>{const l=s.trim().toUpperCase().slice(0,14);d(f,t(f).map((v,c)=>c===e?l:v))},Ot=(e,s)=>e.trim()?e:`PLAYER ${s+1}`,Ut=()=>{t(f).length>=gt||(d(f,[...t(f),""]),d(u,t(u).map(e=>({...e,bids:[...e.bids,null],takes:[...e.takes,null]}))))},jt=()=>{t(f).length<=ft||(d(f,t(f).slice(0,-1)),d(u,t(u).map(e=>({...e,bids:e.bids.slice(0,-1),takes:e.takes.slice(0,-1)}))))},Rt=(e,s,l,v)=>{const c=t(u)[e],_=v===null||!Number.isFinite(v)?null:kt(v,0,c.handSize);d(u,t(u).map((h,H)=>{if(H!==e)return h;const G=h[l].map((B,R)=>R===s?_:B);return{...h,[l]:G}}))},Lt=(e,s)=>{const l=e.bids[s],v=e.takes[s];return l===null||v===null?null:l===v?l===0?5:10+v:v},K=(e,s)=>t(C)[e]!=="results"?null:Lt(t(u)[e],s),xt=(e,s)=>t(u).reduce((l,v,c)=>{if(c>e)return l;const _=K(c,s);return l+(_??0)},0),Vt=e=>xt(t(u).length-1,e),Tt=(e,s)=>xt(e-1,s),Yt=(e,s)=>{const l=K(e,s)??0;return Tt(e,s)+l},Gt=()=>{if(!t(I)){d(I,!0);return}tt(),d(I,!1),d(N,"setup")},qt=e=>{const s=e.currentTarget;d(Y,Number(s.value)),tt()},Dt=e=>{const s=e.currentTarget;d(vt,s.checked),tt()},Jt=()=>{d(N,"round"),d(o,0)},Pt=e=>{d(o,kt(e,0,Math.max(0,t(u).length-1))),d(N,"round")},wt=(e,s)=>{d(C,t(C).map((l,v)=>v===e?s:l))};tt(),me();var it=Fe();ce("8u244y",e=>{var s=he();W(4),ve(()=>{ie.title="Oh Hell!"}),i(e,s)});var At=r(it),St=n(At,2),ct=r(St),zt=r(ct),dt=r(zt),Kt=n(r(dt),2);{var Qt=e=>{var s=ye();y("click",s,()=>d(N,"setup")),i(e,s)};M(Kt,e=>{t(N)==="round"&&e(Qt)})}a(dt);var Wt=n(dt,2);{var Xt=e=>{var s=fe();W(2),i(e,s)},Zt=e=>{var s=ge(),l=X(s),v=r(l);a(l);var c=n(l,2),_=r(c);a(c),k(()=>{var h;w(v,`Round ${t(o)+1} of ${t(u).length??""}`),w(_,`Cards this round: ${((h=t(u)[t(o)])==null?void 0:h.handSize)??0??""}`)}),i(e,s)};M(Wt,e=>{t(N)==="setup"?e(Xt):e(Zt,!1)})}a(zt),W(2),a(ct);var Et=n(ct,2);{var $t=e=>{var s=xe(),l=r(s),v=n(r(l),2);v.textContent="Tap a name to edit. Add up to 8 players.";var c=n(v,2);ht(c,5,()=>t(f),yt,(z,j,T)=>{var L=ke(),V=r(L);V.textContent=T+1;var D=n(V,2);$(D),Z(D,"placeholder",`PLAYER ${T+1}`),a(L),k(()=>ut(D,t(j))),y("input",D,b=>Bt(T,b.currentTarget.value)),i(z,L)}),a(c);var _=n(c,2),h=r(_),H=n(h,2);a(_),a(l);var G=n(l,2),B=n(r(G),4),R=n(r(B),2);ht(R,4,()=>[5,6,7,8,9,10,11,12,13],yt,(z,j)=>{var T=Re(),L=r(T,!0);a(T);var V={};k(()=>{w(L,j),V!==(V=j)&&(T.value=(T.__value=j)??"")}),i(z,T)}),a(R);var g;pe(R),a(B);var x=n(B,2),O=r(x);$(O);var et=n(O,2),bt=r(et);a(et),a(x);var p=n(x,2),U=r(p),Q=r(U);a(U);var q=n(U,2),mt=r(q,!0);a(q),a(p);var st=n(p,2);a(G),a(s),k(z=>{h.disabled=t(f).length>=gt,H.disabled=t(f).length<=ft,g!==(g=t(Y))&&(R.value=(R.__value=t(Y))??"",be(R,t(Y))),de(O,t(vt)),w(bt,`Play back up to ${t(Y)??""}`),w(Q,`${t(u).length??""} rounds`),w(mt,z)},[()=>t(u).map(z=>z.handSize).join(" / ")]),y("click",h,Ut),y("click",H,jt),y("change",R,qt),y("change",O,Dt),y("click",st,Jt),i(e,s)},It=e=>{var s=Ce(),l=r(s);{var v=g=>{var x=ze(),O=n(X(x),2);ht(O,5,()=>t(f),yt,(et,bt,p)=>{var U=Se(),Q=r(U),q=r(Q),mt=r(q,!0);a(q);var st=n(q,2),z=r(st);{var j=b=>{var P=nt();k((A,S)=>w(P,`${A??""} -> ${S??""}`),[()=>Tt(t(o),p),()=>Yt(t(o),p)]),i(b,P)},T=b=>{var P=nt();k(A=>w(P,A),[()=>Vt(p)]),i(b,P)};M(z,b=>{t(C)[t(o)]==="results"&&K(t(o),p)!==null?b(j):b(T,!1)})}a(st),a(Q);var L=n(Q,2);{var V=b=>{var P=Te(),A=X(P),S=r(A);$(S),a(A),W(4),k(()=>{Z(S,"max",t(u)[t(o)].handSize),ut(S,t(u)[t(o)].bids[p]??"")}),y("input",S,at=>Rt(t(o),p,"bids",at.currentTarget.value===""?null:Number(at.currentTarget.value))),i(b,P)},D=b=>{var P=Ae(),A=X(P),S=r(A);$(S),a(A);var at=n(A,2);{var ee=J=>{var rt=Pe();W(2),i(J,rt)},se=J=>{var rt=we(),_t=X(rt),lt=r(_t);$(lt),a(_t);var Mt=n(_t,2),Ct=r(Mt),ae=r(Ct);{var re=E=>{var ot=nt();k(oe=>w(ot,oe),[()=>K(t(o),p)]),i(E,ot)},le=E=>{var ot=nt("--");i(E,ot)};M(ae,E=>{K(t(o),p)!==null?E(re):E(le,!1)})}a(Ct),a(Mt),k(()=>{Z(lt,"max",t(u)[t(o)].handSize),ut(lt,t(u)[t(o)].takes[p]??"")}),y("input",lt,E=>Rt(t(o),p,"takes",E.currentTarget.value===""?null:Number(E.currentTarget.value))),i(J,rt)};M(at,J=>{t(u)[t(o)].bids[p]===null?J(ee):J(se,!1)})}k(()=>{Z(S,"max",t(u)[t(o)].handSize),ut(S,t(u)[t(o)].bids[p]??"")}),i(b,P)};M(L,b=>{t(C)[t(o)]==="bids"?b(V):b(D,!1)})}a(U),k(b=>w(mt,b),[()=>Ot(t(bt),p)]),i(et,U)}),a(O),i(g,x)};M(l,g=>{t(u)[t(o)]&&g(v)})}var c=n(l,2),_=r(c),h=r(_),H=n(h,2);{var G=g=>{var x=Ee();y("click",x,()=>wt(t(o),"results")),i(g,x)},B=g=>{var x=Me();y("click",x,()=>wt(t(o),"bids")),i(g,x)};M(H,g=>{t(C)[t(o)]==="bids"?g(G):g(B,!1)})}var R=n(H,2);a(_),a(c),a(s),k(()=>{h.disabled=t(o)<=0,R.disabled=t(C)[t(o)]!=="results"||t(o)>=t(u).length-1}),y("click",h,()=>Pt(t(o)-1)),y("click",R,()=>Pt(t(o)+1)),i(e,s)};M(Et,e=>{t(N)==="setup"?e($t):e(It,!1)})}var pt=n(Et,2),te=r(pt,!0);a(pt),a(St),a(it),k(()=>{Z(At,"href",`${_e??""}/games`),w(te,t(I)?"ARE YOU SURE?":"RESET SCORES")}),y("click",pt,Gt),i(Ft,it),ue()}export{De as component};
